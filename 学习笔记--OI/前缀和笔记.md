深入浅出进P22

前缀和的用处：以 `O(1)`的方式来计算区间和，多次询问的优势较为突出。

## 一维前缀和

一维的前缀和，可以快速查询 $\sum\limits_{i=l}^{r}a_i$，查询时间复杂度为 $O(1)$，预处理时间复杂度为 $O(n)$，总体时间复杂度 $O(n)$。

具体思路：

读入的时候，让 $s_i = s_{i - 1} + a_i$，使得 $s_i$ 为前 $i$ 个数的和。

个人认为这个也是 DP 的一种。

查询的时候输出 $s_r - s_{l - 1}$。

**注意**，是 $s_r - s+{i - 1}$ 不是 $s_r - s_i$。

## 二维前缀和

二维的前缀和，可以快速查询 $\sum\limits_{i=x_1,j=y_1}^{x_2,y_2}a_{i,j}$，查询时间复杂度为 $O(1)$，预处理时间复杂度为 $O(n^2)$，总体复杂度 $O(n^2)$。

思路：

预处理：$s_{i, j} = s_{i, j - 1} + s_{i - 1, j} - s_{i - 1, j - 1} + a_{i, j}$

![](https://cdn.luogu.com.cn/upload/image_hosting/8zxfug4t.png)

查询：$s_{x_2, y_2} + s_{x_1 - 1, x_2 - 1} - s_{x_2, y_1 - 1} - s_{x_1 - 1, y_2}$



